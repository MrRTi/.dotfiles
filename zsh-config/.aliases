# navigation
alias cd..='cd ..'
alias ..='cd ..'
alias ....='cd ../../'
alias ~~='cd ~/'

# shell
alias md='mkdir'
alias sl='ls'
alias ll='lsd -la || ls -la'
alias batp='bat --style=plain --paging=never'
alias batn='bat --paging=never'
alias zshr='source ~/.zshrc'
alias pwds='echo ${PWD##*/} | sed "s/^./_/g"' 

function sshmux() {
  ssh "$1" -t -- /bin/zsh -c 'tmux new -As ${PWD##*/}'
}

alias vim='nvim'
alias v='vim'
alias vf='v .'

alias tldrf='tldr --list | fzf --preview "tldr {1} --color=always" --preview-window=right,70% | xargs tldr'

# tmux
alias t='tmux'
alias tns='t new -As $(pwds)'
alias tnd='TMUX= tns -d'
alias ts='t ls -F "#{session_name}" | fzf'
function tmuxswitch() {
  if [[ ! -z "${TMUX}" ]] then; 
    tmux switch -t "$1"
  else
    tmux attach -t "$1"
  fi
}
alias tswitch='tmuxswitch'
alias ta='tswitch $(ts)'
alias tn='tswitch $(pwds) || tnd && tswitch $(pwds)' 

# docker-compose
alias d='docker'
alias dc='d compose'
alias dcr='dc run --rm --use-aliases'
alias dcrs='dcr --service-ports --use-aliases'

# git
alias g='git'
alias gs='g status '
alias gc='g commit'
alias gcv='gc -v'
alias gcm='gc -m'
alias gca='gc --ammend'
alias gcane='gc --amend --no-edit'
alias guc='g reset HEAD~'
alias gfrs='g flow release start'
alias gfrf='g flow release finish'
alias ga='g add'
alias gco='g checkout'
alias gb='g branch'
alias gbmv='g branch -M'
alias gbrm='g branch -D'
alias grup='g remote update'
alias gup='g pull'
alias gupr='g pull -r'
alias gp='g push'
alias gpt='gp && gp --tags'
alias gpuo='gp -u origin'
alias gpfo='gp -f origin'
alias glol='g log --graph --pretty='\''%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'\'
alias gcof='git branch --sort=-committerdate | fzf --header "Checkout Recent Branch" --preview "git diff --color=always {1}"  | xargs git checkout'
alias gcofd='git branch --sort=-committerdate | fzf --header "Checkout Recent Branch" --preview "git diff --color=always {1} | delta" --pointer="îœ¥" | xargs git checkout'

# git worktree
alias gw='g worktree'
alias gwl='gw list'
alias gwroot='gwl | grep bare | awk '\''{print $1}'\'''
alias gwa='gb | fzf | xargs -I@ gw add @  ${gwroot}\@'
alias gwd='gb | fzf | xargs -I@ gw remove @'
alias gws='cd $(gwl | awk '\''{print ($3 == "" ? "(root)" : $3), $1}'\'' | fzf | awk '\''{print $2}'\'')' 

# terraform
alias tf='terraform'
alias tfi='tf init'
alias tfp='tf plan'
alias tfa='tf apply'

# Kubernetes
alias kubefp='export KUBE_NAMESPACE=$(kubefn) && kubectl get pods --field-selector=status.phase=Running -n ${KUBE_NAMESPACE:-default} | fzf | awk '\''{print $1}'\'''
alias kubelogs='kubefp | xargs kubectl logs'
alias kubebash='kubeexec /bin/bash'
alias kubefn='kubectl get namespace | fzf | awk '\''{print $1}'\'''
alias kubeexec='kubefp | xargs -o -I@ kubectl exec -ti @ -c netology-rails -n ${KUBE_NAMESPACE:-default} -- '

# yandex cloud
alias ycls='yc compute instance list --format json | jq --raw-output '\''.[] | "\(.name) \(.status)"'\'''
alias ycfn='ycls | fzf | awk '\''{print $1}'\'''
alias ycup=' ycfn | xargs yc compute instance start --name'
alias ycstop=' ycfn | xargs yc compute instance stop --name'

# brew
alias rebrew='brew bundle --file ${DOTFILES_PATH}/Brewfile'

# home-mamager
alias hm='home-manager'
alias hms='hm switch'
